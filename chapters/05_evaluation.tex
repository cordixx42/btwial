\chapter{Evaluation}\label{chapter:evaluation}
We implemented the Backwards Reachability Algorithm with the Table of Nodes (\autoref{alg:bw_wwa_final}) in a tool \textsc{Petrimat} using the programming language C++. The tool expects as input Petri nets in the MIST file format. We implemented a parser to transform from the MIST format into the representation we use in our implementation.  

We tested the tool on existing coverability instances with a benchmark script from another coverability tool \textsc{QCover} (cite). 
We performed tests on two benchmark suites, one called mist and the other wahl-kroening. The mist suite contains 27 coverability instances, and

We compare \textsc{Petrimat} (\textit{ptm}) with the tools \textsc{Mist} (\textit{mist}) and \textsc{QCover} (\textit{qcov}). All benchmarks were run on a machine with an Apple M1 Pro CPU and 32 GiB RAM. We performed each benchmark with a timeout of 5 minutes. 

The results for the mist benchmarks are shown in \autoref{tab:mist-results}.
The instances are ordered ascendingly by the number of places in the Petri net. 
The first column shows the instance name, while the second column depicts the result. Safe means not coverable, unsafe means coverable.

The next two columns show information on the underlying Petri net. number

The table shows the coverability instances with the information on the underlying Petri net, the solve time in milliseconds for the three tools, and an estimation of the maximal memory usage of the tools in kilobytes. 


%\begin{table}[h]
%\centering
%\resizebox{\textwidth}{!}{%
%\begin{tabular}{c c c c c c c c c c}
%\toprule
%
%\multicolumn{1}{c}{} & \multicolumn{1}{c}{} & \multicolumn{2}{c}{\textbf{Petri net}} & \multicolumn{3}{c}{\textbf{solve time (ms)}} & \multicolumn{3}{c}{\textbf{max memory (mb)}} \\
%\cmidrule(rl){3-4} \cmidrule(rl){5-7} \cmidrule(rl){8-10}
%
%instance & result & places & trans & ptm & mist & qcov & ptm & mist & qcov \\
%
%\midrule
%
%basicME & safe & 5 & 4 & 10 & 8 & 3039 & 1,57 & 4,64 & 79,89 \\ %\hline
%pingpong & safe & 6 & 6 & 13 & 8 & 2383 & 1,58 & 4,7 & 77,12 \\ %\hline
%newrtp & safe & 9 & 12 & 33 & 10 & 2054 & 1,78 & 4,66 & 72,32 \\ %\hline
%leabasicapproach & unsafe & 16 & 12 & 40 & 11 & 3229 & 2,9 & 4,92 & 80,59 \\ %\hline
%lamport & safe & 11 & 9 & 51 & 13 & 2673 & 2,46 & 4,7 & 82,21 \\ %\hline
%MultiME & safe & 12 & 11 & 57 & 11 & 2797 & 2,45 & 5,17 & 86,54 \\ %\hline
%csm & safe & 14 & 13 & 93 & 22 & 2379 & 3,14 & 5,41 & 74,67 \\ %\hline
%peterson & safe & 14 & 12 & 144 & 21 & 3217 & 3,7 & 4,9 & 78,21 \\ %\hline
%multipool & safe & 18 & 21 & 221 & 286 & 2640 & 4,72 & 7,78 & 72,43 \\ %\hline
%read-write & safe & 13 & 9 & 288 & 56 & 2300 & 4,4 & 6,1 & 74,3 \\ %\hline
%mesh2x2 & safe & 32 & 32 & 512 & 129 & 2960 & 8,91 & 7,23 & 76,46 \\ %\hline
%fms & safe & 22 & 20 & 799 & 36 & 2569 & 6,38 & 4,77 & 77,06 \\ %\hline
%newdekker & safe & 16 & 14 & 1167 & 56 & 2620 & 16,51 & 4,83 & 79,89 \\ %\hline
%bingham\_h25 & safe & 28 & 51 & 1525 & 248 & 2561 & 15,22 & 7,73 & 74,91 \\ %\hline
%manufacturing & safe & 13 & 6 & 2454 & 885 & 2541 & 26,94 & 12,03 & 79,36 \\ %\hline
%mesh3x2 & safe & 52 & 54 & 4000 & 1381 & 2677 & 52,75 & 12,04 & 72,61 \\ %\hline
%pncsasemiliv & unsafe & 31 & 36 & 6133 & 836 & 3810 & 91,25 & 6,52 & 81,12 \\ %\hline
%kanban & unsafe & 16 & 16 & 7503 & 158863 & - & 143,12 & 53,71 & 92,67 \\ %\hline
%bounded\_kanban & safe & 16 & 16 & 8774 & 160560 & 2560 & 138,29 & 4,71 & 75,17 \\ %\hline
%bingham\_h50 & safe & 53 & 101 & 11059 & 3461 & 3047 & 94,91 & 14,81 & 72,93 \\ %\hline
%extendedread-write-sc & safe & 24 & 22 & 15508 & 94171 & 3383 & 82,62 & 5,6 & 76,48 \\ %\hline
%fms\_attic & safe & 22 & 20 & 16381 & 827 & 2646 & 59,25 & 8,64 & 77,82 \\ %\hline
%bingham\_h250\_attic & safe & 253 & 501 & 127682 & 9902 & 93454 & 751,33 & 465,48 & 237,42 \\ %\hline
%pncsacover & unsafe & 31 & 36 & 128721 & - & 31920 & 1529,44 & 15,53 & 87,41 \\ %\hline
%bingham\_h150 & safe & 153 & 301 & - & - & 3336 & 2032,22 & 104,47 & 78,62 \\ %\hline
%bingham\_h250 & safe & 253 & 501 & - & - & 3127 & 3335,7 & 108,89 & 84,74 \\ %\hline
%extendedread-write & safe & 24 & 22 & - & - & 2900 & 4187,79 & 34,09 & 85,97 \\ %\hline
%
%\bottomrule
%\end{tabular}%
%}
%\caption{Results of the mist benchmark suite}
%\label{tab:mist-results}
%\end{table}


\begin{table}[h]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{c c c c c c c c c c}
\toprule

\multicolumn{1}{c}{} & \multicolumn{1}{c}{} & \multicolumn{2}{c}{\textbf{Petri net}} & \multicolumn{3}{c}{\textbf{solve time (ms)}} & \multicolumn{3}{c}{\textbf{max memory (mb)}} \\
\cmidrule(rl){3-4} \cmidrule(rl){5-7} \cmidrule(rl){8-10}

\textbf{instance} & \textbf{result} & places & trans & \textit{ptm}& \textit{mist} & \textit{qcov} & \textit{ptm} & \textit{mist} & \textit{qcov} \\

\midrule

basicME & safe & 5 & 4 & 10 & 8 & 3039 & 1.57 & 4.64 & 79.89 \\
        pingpong & safe & 6 & 6 & 13 & 8 & 2383 & 1.58 & 4.7 & 77.12 \\
        newrtp & safe & 9 & 12 & 33 & 10 & 2054 & 1.78 & 4.66 & 72.32 \\
        lamport & safe & 11 & 9 & 51 & 13 & 2673 & 2.46 & 4.7 & 82.21 \\
        MultiME & safe & 12 & 11 & 57 & 11 & 2797 & 2.45 & 5.17 & 86.54 \\
        read-write & safe & 13 & 9 & 288 & 56 & 2300 & 4.4 & 6.1 & 74.3 \\
        manufacturing & safe & 13 & 6 & 2454 & 885 & 2541 & 26.94 & 12.03 & 79.36 \\
        csm & safe & 14 & 13 & 93 & 22 & 2379 & 3.14 & 5.41 & 74.67 \\
        peterson & safe & 14 & 12 & 144 & 21 & 3217 & 3.7 & 4.9 & 78.21 \\
        leabasicapproach & unsafe & 16 & 12 & 40 & 11 & 3229 & 2.9 & 4.92 & 80.59 \\
        newdekker & safe & 16 & 14 & 1167 & 56 & 2620 & 16.51 & 4.83 & 79.89 \\
        kanban & unsafe & 16 & 16 & 7503 & 158863 & - & 143.12 & 53.71 & 92.67 \\
        kanban\_bounded & safe & 16 & 16 & 8774 & 160560 & 2560 & 138.29 & 4.71 & 75.17 \\
        multipool & safe & 18 & 21 & 221 & 286 & 2640 & 4.72 & 7.78 & 72.43 \\
        fms & safe & 22 & 20 & 799 & 36 & 2569 & 6.38 & 4.77 & 77.06 \\
        fms\_attic & safe & 22 & 20 & 16381 & 827 & 2646 & 59.25 & 8.64 & 77.82 \\
        extendedread-write-sc & safe & 24 & 22 & 15508 & 94171 & 3383 & 82.62 & 5.6 & 76.48 \\
        extendedread-write & safe & 24 & 22 & - & - & 2900 & 4187.79 & 34.09 & 85.97 \\
        bingham\_h25 & safe & 28 & 51 & 1525 & 248 & 2561 & 15.22 & 7.73 & 74.91 \\
        pncsasemiliv & unsafe & 31 & 36 & 6133 & 836 & 3810 & 91.25 & 6.52 & 81.12 \\
        pncsacover & unsafe & 31 & 36 & 128721 & - & 31920 & 1529.44 & 15.53 & 87.41 \\
        mesh2x2 & safe & 32 & 32 & 512 & 129 & 2960 & 8.91 & 7.23 & 76.46 \\
        mesh3x2 & safe & 52 & 54 & 4000 & 1381 & 2677 & 52.75 & 12.04 & 72.61 \\
        bingham\_h50 & safe & 53 & 101 & 11059 & 3461 & 3047 & 94.91 & 14.81 & 72.93 \\
        bingham\_h150 & safe & 153 & 301 & - & - & 3336 & 2032.22 & 104.47 & 78.62 \\
        bingham\_h250\_attic & safe & 253 & 501 & 127682 & 9902 & 93454 & 751.33 & 465.48 & 237.42 \\
        bingham\_h250 & safe & 253 & 501 & - & - & 3127 & 3335.7 & 108.89 & 84.74 \\

\bottomrule
\end{tabular}%
}
\caption{Results of the mist benchmark suite}
\label{tab:mist-results}
\end{table}



\begin{table}[h]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{c c c c c c c c c c}
\toprule

\multicolumn{1}{c}{} & \multicolumn{2}{c}{\textbf{Petri net}} & \multicolumn{1}{c}{} & \multicolumn{3}{c}{\textbf{Table of Nodes}} &  \multicolumn{1}{c}{\textbf{MIST}}\\
\cmidrule(rl){2-3} \cmidrule(rl){5-7}

\textbf{instance} & places & trans & \textbf{iter} & table size & max node & end node & end size \\

\midrule
        basicME & 5 & 4 & 3 & 365 & 31 & 31 & 26 \\
        pingpong & 6 & 6 & 4 & 427 & 28 & 28 & 33 \\
        newrtp & 9 & 12 & 6 & 939 & 31 & 29 & 50 \\
        lamport & 11 & 9 & 5 & 3210 & 97 & 62 & 80 \\
        MultiME & 12 & 11 & 5 & 3113 & 73 & 66 & 70 \\
        manufacturing & 13 & 6 & 14 & 89483 & 3348 & 1489 & 953 \\
        read-write & 13 & 9 & 9 & 9923 & 322 & 236 & 235 \\
        peterson & 14 & 12 & 6 & 6799 & 210 & 181 & 169 \\
        csm & 14 & 13 & 5 & 5210 & 110 & 93 & 109 \\
        leabasicapproach & 16 & 12 & 2 & 4030 & 180 & 180 & 162 \\
        newdekker & 16 & 14 & 8 & 51804 & 1468 & 895 & 341 \\
        kanban & 16 & 16 & 11 & 571617 & 6635 & 1132 & 1594 \\
        kanban\_bounded & 16 & 16 & 18 & 574675 & 6635 & 768 & 720 \\
        multipool & 18 & 21 & 6 & 11731 & 137 & 116 & 196 \\
        fms & 22 & 20 & 15 & 15827 & 285 & 247 & 233 \\
        fms\_attic & 22 & 20 & 27 & 228830 & 2735 & 2431 & 881 \\
        extendedread-write-sc & 24 & 22 & 24 & 322684 & 2769 & 1245 & 758 \\
        extendedread-write & 24 & 22 & - & - & - & - & - \\
        bingham\_h25 & 28 & 51 & 27 & 48969 & 161 & 161 & 253 \\
        pncsasemiliv & 31 & 36 & 7 & 340348 & 6375 & 1652 & 2139 \\
        pncsacover & 31 & 36 & 15 & 7015463 & 80180 & 779 & - \\
        mesh2x2 & 32 & 32 & 5 & 30142 & 271 & 271 & 344 \\
        mesh3x2 & 52 & 54 & 8 & 202945 & 914 & 796 & 987 \\
        bingham\_h50 & 53 & 101 & 52 & 316044 & 311 & 311 & 503 \\
        bingham\_h150 & 153 & 301 & - & - & - & - & - \\
        bingham\_h250\_attic & 253 & 501 & 4 & 2869137 & 3547 & 2914 & 4512 \\
        bingham\_h250 & 253 & 501 & - & - & - & - & - \\
        \bottomrule
\end{tabular}%
}
\caption{Information on the Data Structure}
\label{tab:mist-results-datastruct}
\end{table}




\begin{itemize}
\item tested with different compiler optimizations, speed up was not very high , o0 to ofast 
\item program maybe much time with memory access 
\item mist invariants and not invariants
\end{itemize}

%\pgfplotstableread[col sep=comma]{./csv-plot/ext-rw.csv}\mydata

\begin{figure}[ht]
\begin{tikzpicture}
\begin{axis}[
	xmode=normal,
	ymode=log,
	xlabel=iterations, % \hertz requires SIunits
	ylabel=automaton size for node $q$,
%    xticklabels from table={\mydata}{INSTANCE},
	title={Marking Size Growth},
	width=0.85\linewidth,
	legend style={at={(1,1)}, anchor=north east}]
	
	\addplot[-,line width=1pt,solid,color=blue!75,mark=o]  table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/ext-rw.csv};
	\addlegendentry{extended-read-write-sc}
	
	\addplot[-,line width=1pt,solid,color=red!75,mark=x]  table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/pncsacover.csv};
	\addlegendentry{pncsacover}
	
	\addplot[-,line width=1pt,solid,color=green!75,mark=square]  table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/bh25.csv};
	\addlegendentry{bingham\_25}
	
	\addplot[-,line width=1pt,solid,color=teal!75,mark=triangle]  table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/manu.csv};
	\addlegendentry{manufacturing}
	
	\addplot[-,line width=1pt,solid,color=orange!75,mark=diamond]  table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/kanbanb.csv};
	\addlegendentry{kanban\_bounded}
	
	\addplot[-,line width=1pt,solid,color=black!75,mark=-] 
table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/pncsaemiliv.csv};
	\addlegendentry{pncsaemiliv}
	
	\addplot[-,line width=1pt,solid,color=violet!75,mark=|] 
table[x=ITER,y=MARKINGSIZE,col sep=comma]{./csv-plot/mesh3x2.csv};
	\addlegendentry{mesh3x2}
	
%	\addplot [mark=x, blue!80 ] table [x expr =\coordindex, y={TABLESIZE}]{\mydata};
    %\addlegendentry{\colname}
%    \addplot [mark=x, red!80 ] table [x expr =\coordindex, y={TABLESIZE}]{\mydata};
    
%\addplot[line width=1pt,solid,color=blue,mark=*,domain=0:30] %
%	table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/iter-one.csv};
%\addlegendentry{Transfer function};
\end{axis}
\end{tikzpicture}
\end{figure}


\begin{figure}[ht]
\begin{tikzpicture}
\begin{axis}[
	xmode=normal,
	ymode=log,
	xlabel=iterations, % \hertz requires SIunits
	ylabel=size of table (in nodes),
%    xticklabels from table={\mydata}{INSTANCE},
	title={Table Size Growth},
	width=0.85\linewidth,
	legend style={at={(1,0)}, anchor=south east}]
	
	\addplot[-,line width=1pt,solid,color=blue!75,mark=o]  table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/ext-rw.csv};
	\addlegendentry{extended-read-write-sc}
	
	\addplot[-,line width=1pt,solid,color=red!75,mark=x]  table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/pncsacover.csv};
	\addlegendentry{pncsacover}
	
	\addplot[-,line width=1pt,solid,color=green!75,mark=square]  table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/bh25.csv};
	\addlegendentry{bingham\_25}
	
	\addplot[-,line width=1pt,solid,color=teal!75,mark=triangle]  table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/manu.csv};
	\addlegendentry{manufacturing}
	
	\addplot[-,line width=1pt,solid,color=orange!75,mark=diamond]  table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/kanbanb.csv};
	\addlegendentry{kanban\_bounded}
	
	\addplot[-,line width=1pt,solid,color=black!75,mark=-] 
table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/pncsaemiliv.csv};
	\addlegendentry{pncsaemiliv}
	
	\addplot[-,line width=1pt,solid,color=violet!75,mark=|] 
table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/mesh3x2.csv};
	\addlegendentry{mesh3x2}
	
\end{axis}
\end{tikzpicture}
\end{figure}


%\begin{figure}[ht]
%\begin{tikzpicture}
%\begin{axis}[
%	xmode=normal,
%	ymode=log,
%	xlabel=iterations, % \hertz requires SIunits
%	ylabel=number of nodes in table,
%	title={Table Size Growth},
%%	grid=both,
%%	minor grid style={gray!25},
%%	major grid style={gray!25},
%	width=0.85\linewidth]
%\addplot[line width=1pt,solid,color=blue,mark=*,domain=0:30] %
%	table[x=ITER,y=TABLESIZE,col sep=comma]{./csv-plot/iter-one.csv};
%\addlegendentry{Transfer function};
%\end{axis}
%\end{tikzpicture}
%\end{figure}
